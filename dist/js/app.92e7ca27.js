(function(){"use strict";var e={8412:function(e,n,t){var o=t(5130),a=t(6768),r=t(6450),l=t(1051);function u(e,n,t,o,u,i){const c=(0,a.g2)("Main"),s=(0,a.g2)("app-alert");return(0,a.uX)(),(0,a.Wv)(r.E,null,{default:(0,a.k6)((()=>[(0,a.bF)(l.Y,null,{default:(0,a.k6)((()=>[(0,a.bF)(c),(0,a.bF)(s)])),_:1})])),_:1})}var i=t(4232),c=t(8208);const s={class:"container"},d={class:"top_panel"},f={class:"top_left_panel"},v={class:"middle_buttons"},p={class:"runner_panel"},b={class:"runner_panel_left"},k={class:"runner_headline"},m={class:"runner_name"},_={class:"runner_delete"},h={class:"runner_times_container"},g={class:"runner_times_no"},w={class:"runner_times_info"},T={class:"runner_times_delete"},D={class:"runner_panel_right"},y={class:"footer_buttons"};function R(e,n,t,r,l,u){return(0,a.uX)(),(0,a.CE)("div",s,[n[12]||(n[12]=(0,a.Lk)("div",{class:"top_title"},[(0,a.Lk)("div",null,"BLUETOOTH STOPWATCH")],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",f,[(0,a.Lk)("div",null,(0,i.v_)(u.currentTime),1)])]),(0,a.Lk)("div",v,[(0,a.bF)(c.D,{variant:"outlined",color:"black",onClick:r.onTimerStart,disabled:"initial"!==r.timerStatus},{default:(0,a.k6)((()=>n[2]||(n[2]=[(0,a.eW)("START")]))),_:1},8,["onClick","disabled"]),(0,a.bF)(c.D,{variant:"outlined",color:"black",onClick:r.onTimerStop,disabled:"start"!==r.timerStatus&&"lap1"!==r.timerStatus&&"lap2"!==r.timerStatus},{default:(0,a.k6)((()=>n[3]||(n[3]=[(0,a.eW)("STOP")]))),_:1},8,["onClick","disabled"]),(0,a.bF)(c.D,{variant:"outlined",color:"black",onClick:r.onTimerReset,disabled:"stop"!==r.timerStatus},{default:(0,a.k6)((()=>n[4]||(n[4]=[(0,a.eW)("RESET")]))),_:1},8,["onClick","disabled"])]),(0,a.Lk)("div",p,[(0,a.Lk)("div",b,[(0,a.Lk)("div",k,[(0,a.Lk)("div",m,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>r.currentRunner.name=e),onChange:n[1]||(n[1]=(...e)=>r.onChangeRunnerName&&r.onChangeRunnerName(...e))},null,544),[[o.Jo,r.currentRunner.name]])]),(0,a.Lk)("div",_,[(0,a.bF)(c.D,{color:"red",onClick:r.onDeleteRunner},{default:(0,a.k6)((()=>n[5]||(n[5]=[(0,a.eW)("DELETE")]))),_:1},8,["onClick"])])]),(0,a.Lk)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.currentRunner.data,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"runner_times",key:t},[(0,a.Lk)("div",g," [ "+(0,i.v_)(r.currentRunner.data.length-t)+" ] ",1),(0,a.Lk)("div",w,[(0,a.Lk)("div",null,(0,i.v_)(e.time),1)]),(0,a.Lk)("div",T,[(0,a.bF)(c.D,{color:"red",size:"x-small",onClick:()=>r.onDeleteRunnerTime(t)},{default:(0,a.k6)((()=>n[6]||(n[6]=[(0,a.Lk)("span",{style:{"font-size":"10px"}},"DELETE",-1)]))),_:2},1032,["onClick"])])])))),128))])]),(0,a.Lk)("div",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.runnerList,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.number},[(0,a.bF)(c.D,{class:(0,i.C4)({"active-runner":r.currentRunner===e}),onClick:n=>r.onSelectRunner(e)},{default:(0,a.k6)((()=>[(0,a.Lk)("span",null,(0,i.v_)(e.name),1)])),_:2},1032,["class","onClick"])])))),128)),(0,a.Lk)("div",null,[(0,a.bF)(c.D,{color:"red",onClick:r.onAddRunner},{default:(0,a.k6)((()=>n[7]||(n[7]=[(0,a.eW)("ADD")]))),_:1},8,["onClick"])])])]),(0,a.Lk)("div",y,[(0,a.bo)((0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onRequestDevice},{default:(0,a.k6)((()=>n[8]||(n[8]=[(0,a.eW)("BLUETOOTH ON")]))),_:1},8,["onClick"]),[[o.aG,"disconnected"===r.bleStatus]]),(0,a.bo)((0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onDisconnect},{default:(0,a.k6)((()=>n[9]||(n[9]=[(0,a.eW)("BLUETOOTH OFF")]))),_:1},8,["onClick"]),[[o.aG,"connected"===r.bleStatus]]),(0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onClearData},{default:(0,a.k6)((()=>n[10]||(n[10]=[(0,a.eW)("CLEAR")]))),_:1},8,["onClick"]),(0,a.bF)(c.D,{class:"flex-grow-1",onClick:r.onDownloadData},{default:(0,a.k6)((()=>n[11]||(n[11]=[(0,a.eW)("DOWNLOAD")]))),_:1},8,["onClick"])])])}t(4114),t(6573),t(8100),t(7936),t(8111),t(2489),t(1701),t(8237),t(7467),t(4732),t(9577),t(4603),t(7566),t(8721);var C=t(144);const L={class:"app_alert__background"},S={class:"app_alert__container"},O={class:"app_alert__message"},E={class:"app_alert__buttons"};function F(e,n,t,r,l,u){return(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",S,[(0,a.Lk)("div",O,(0,i.v_)(r.store.alertMessage),1),(0,a.Lk)("div",E,[(0,a.bo)((0,a.bF)(c.D,{onClick:r.close,color:"#ccc"},{default:(0,a.k6)((()=>n[0]||(n[0]=[(0,a.eW)("閉じる")]))),_:1},8,["onClick"]),[[o.aG,"close"===r.store.alertType]]),(0,a.bo)((0,a.bF)(c.D,{onClick:r.yes,color:"#ccc"},{default:(0,a.k6)((()=>n[1]||(n[1]=[(0,a.eW)("はい")]))),_:1},8,["onClick"]),[[o.aG,"yes_no"===r.store.alertType]]),(0,a.bo)((0,a.bF)(c.D,{onClick:r.no,color:"#ccc"},{default:(0,a.k6)((()=>n[2]||(n[2]=[(0,a.eW)("いいえ")]))),_:1},8,["onClick"]),[[o.aG,"yes_no"===r.store.alertType]])])])],512)),[[o.aG,r.store.isShowAlert]])}const A=(0,C.KR)({isShowAlert:!1,alertMessage:"",alertType:""}),U={resolve:void 0,reject:void 0};var j={setup(){return{store:A,close(){A.value.isShowAlert=!1,U.resolve&&U.resolve()},yes(){A.value.isShowAlert=!1,U.resolve&&U.resolve()},no(){A.value.isShowAlert=!1,U.reject&&U.reject()}}},show(e,n){return A.value.isShowAlert=!0,A.value.alertMessage=e,A.value.alertType=n,new Promise(((e,n)=>{U.resolve=e,U.reject=n}))}},x=t(1241);const I=(0,x.A)(j,[["render",F]]);var W=I;const G=new BlueJelly;var N={name:"MainVue",setup(){const e=(0,C.KR)(""),n=(0,C.KR)("disconnected"),t=(0,C.KR)("initial"),o=(0,C.KR)(0),a=(0,C.KR)(0),r=(0,C.KR)(0),l=(0,C.KR)(""),u=(0,C.KR)(""),i=(0,C.KR)([]),c=(0,C.KR)(null);G.setUUID("UUID1","1b24e5c4-a39c-4d46-92fb-3bbcb2f34a41","9d18d524-2a6e-44ce-8724-445575b23e9a"),G.onRead=function(n,t){if("UUID1"===t){const t=new TextDecoder("utf-8"),o=t.decode(n);e.value=o;const a=JSON.parse(o);(1&a.sw)>0&&(console.log("RESET_SW1"),k()),(2&a.sw)>0&&(console.log("RESET_SW2"),k()),(1&a.tr)>0&&(console.log("START_TRG"),f()),(2&a.tr)>0&&(console.log("MIDDLE1_TRG"),v()),(4&a.tr)>0&&(console.log("MIDDLE2_TRG"),p()),(8&a.tr)>0&&(console.log("GOAL_TRG"),b())}},G.onScan=function(){G.connectGATT("UUID1")},G.onConnectGATT=function(e){"UUID1"===e&&(n.value="connected",G.startNotify("UUID1"))},G.onDisconnect=function(){n.value="disconnected",e.value=""};let s,d=0;function f(){if(!s){const e=Date.now();t.value="start";const n=d;s=setInterval((()=>{const t=n+Date.now()-e;o.value=t,d=t}),10),l.value=(new Date).toLocaleString()}}function v(){a.value=o.value,t.value="lap1"}function p(){r.value=o.value,t.value="lap2"}function b(){s&&(clearInterval(s),s=void 0,u.value=(new Date).toLocaleString(),t.value="stop",c.value.data.unshift(_(o.value,a.value,r.value,l.value,u.value)),console.log(c),D())}function k(){b(),o.value=0,a.value=0,r.value=0,d=0,l.value="",u.value="",t.value="initial"}function m(e){return{number:e,name:`Runner${e}`,data:[]}}function _(e,n,t,o,a){return{time:(e/1e3).toFixed(2),lap1:n?(n/1e3).toFixed(2):"",lap2:t?(t/1e3).toFixed(2):"",startTimestamp:o,goalTimestamp:a}}function h(){const e=m(1);i.value=[e],c.value=e,D()}function g(){i.value.map((e=>{e.data=[]})),D()}function w(){const e="download.csv",n=i.value.map((e=>e.data.reduce(((e,n)=>(n.lap1&&(e.push(n.lap1),n.lap2&&e.push(n.lap2)),e.push(n.time),e)),[e.name]).join(","))).join("\n"),t=new Uint8Array([239,187,191]),o=new Blob([t,n],{type:"text/csv"});if(navigator.share){const n=new File([o],e,{type:"text/csv"});navigator.share({files:[n]}).then((()=>{console.log("共有成功.")})).catch((e=>{console.log(e)}))}else{const n=(window.URL||window.webkitURL).createObjectURL(o),t=document.createElement("a");t.href=n,t.download=e,t.click(),(window.URL||window.webkitURL).revokeObjectURL(n)}}function T(){const e=JSON.parse(localStorage.getItem("runner"));return!!(e&&e.length>0)&&(i.value=e,c.value=e[0],!0)}function D(){localStorage.setItem("runner",JSON.stringify(i.value))}return T()||h(),{readData:e,bleStatus:n,timerStatus:t,timer:o,lap1:a,lap2:r,start:l,goal:u,runnerList:i,currentRunner:c,onRequestDevice(){G.requestDevice("UUID1")},onConnect(){G.connectGATT("UUID1")},onRead(){G.read("UUID1")},onDisconnect(){G.disconnect()},onTimerStart(){f()},onTimerLap1(){v()},onTimerLap2(){p()},onTimerStop(){b()},onTimerReset(){k()},onAddRunner(){i.value.push(m(i.value.length+1)),D()},onSelectRunner(e){c.value=e,"stop"===t.value&&k()},async onDeleteRunner(){try{await W.show("削除します。よろしいですか？","yes_no")}catch(n){return}const e=i.value.findIndex((e=>e===c.value));e<0||(i.value=i.value.filter((e=>e!==c.value)),0===i.value.length?h():i.value.length===e?(c.value=i.value[e-1],D()):(c.value=i.value[e],D()))},onChangeRunnerName(){D()},onDeleteRunnerTime(e){c.value.data.splice(e,1),D()},async onClearData(){try{await W.show("クリアします。よろしいですか？","yes_no"),g(),k()}catch(e){}},onDownloadData(){w()}}},computed:{currentTime:function(){return(this.timer/1e3).toFixed(2)},lap1Time:function(){return(this.lap1/1e3).toFixed(2)},lap2Time:function(){return(this.lap2/1e3).toFixed(2)}}};const K=(0,x.A)(N,[["render",R],["__scopeId","data-v-45976fba"]]);var M=K,P={name:"App",components:{Main:M,AppAlert:W},data:()=>({})};const X=(0,x.A)(P,[["render",u]]);var B=X,J=(t(5524),t(1480)),q=(0,J.$N)();async function H(){const e=await t.e(53).then(t.t.bind(t,8874,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}H(),(0,o.Ef)(B).use(q).mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,r){if(!o){var l=1/0;for(s=0;s<e.length;s++){o=e[s][0],a=e[s][1],r=e[s][2];for(var u=!0,i=0;i<o.length;i++)(!1&r||l>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[i])}))?o.splice(i--,1):(u=!1,r<l&&(l=r));if(u){e.splice(s--,1);var c=a();void 0!==c&&(n=c)}}return n}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[o,a,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){var e,n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var r=Object.create(null);t.r(r);var l={};e=e||[null,n({}),n([]),n(n)];for(var u=2&a&&o;"object"==typeof u&&!~e.indexOf(u);u=n(u))Object.getOwnPropertyNames(u).forEach((function(e){l[e]=function(){return o[e]}}));return l["default"]=function(){return o},t.d(r,l),r}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,o){return t.f[o](e,n),n}),[]))}}(),function(){t.u=function(e){return"js/webfontloader.56569530.js"}}(),function(){t.miniCssF=function(e){}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="ble-stop-watch:";t.l=function(o,a,r,l){if(e[o])e[o].push(a);else{var u,i;if(void 0!==r)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var d=c[s];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==n+r){u=d;break}}u||(i=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,t.nc&&u.setAttribute("nonce",t.nc),u.setAttribute("data-webpack",n+r),u.src=o),e[o]=[a];var f=function(n,t){u.onerror=u.onload=null,clearTimeout(v);var a=e[o];if(delete e[o],u.parentNode&&u.parentNode.removeChild(u),a&&a.forEach((function(e){return e(t)})),n)return n(t)},v=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),i&&document.head.appendChild(u)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p=""}(),function(){var e={524:0};t.f.j=function(n,o){var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(t,o){a=e[n]=[t,o]}));o.push(a[2]=r);var l=t.p+t.u(n),u=new Error,i=function(o){if(t.o(e,n)&&(a=e[n],0!==a&&(e[n]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;u.message="Loading chunk "+n+" failed.\n("+r+": "+l+")",u.name="ChunkLoadError",u.type=r,u.request=l,a[1](u)}};t.l(l,i,"chunk-"+n,n)}},t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,r,l=o[0],u=o[1],i=o[2],c=0;if(l.some((function(n){return 0!==e[n]}))){for(a in u)t.o(u,a)&&(t.m[a]=u[a]);if(i)var s=i(t)}for(n&&n(o);c<l.length;c++)r=l[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(s)},o=self["webpackChunkble_stop_watch"]=self["webpackChunkble_stop_watch"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(8412)}));o=t.O(o)})();
//# sourceMappingURL=app.92e7ca27.js.map